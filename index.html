<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>PitchWalker v88</title>
    <link rel="manifest" href="manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#0d1b0e">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/53/53283.png">
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <link rel="stylesheet" href="style.css">
</head>
<body class="crt">

    <div id="game-toast">NOTIFICATION</div>
    
    <div id="gps-status" class="status-dot"></div>

    <div id="pack-overlay" class="pack-overlay" style="display:none;" onclick="revealPack()">
        <div id="pack-wrapper" class="pack-wrapper">
            <div class="pack-body">üì¶</div>
            <div class="pack-label">TAP TO OPEN</div>
        </div>
        <div id="pack-card-display" style="display:none;"></div>
    </div>

    <div id="match-view" class="view-container full-panel" style="background:#000; z-index:15000;">
        <div class="scoreboard">
            <div class="score-box"><span id="score-home">0</span> - <span id="score-away">0</span></div>
            <div class="timer-box" id="match-time">00:00</div>
        </div>
        <div class="pitch-container" id="match-pitch" style="height:50vh; margin-top:20px;">
            <div id="match-ball" class="match-ball">‚öΩ</div>
        </div>
        <div class="commentary-box" id="match-comm">MATCH READY...</div>
        <button id="match-end-btn" class="btn btn-red" style="display:none; margin:20px;" onclick="endMatch()">EXIT MATCH</button>
    </div>

    <div id="intro-layer">
        <div class="title-container" id="title-box">
            <div style="font-size:80px; margin-bottom:10px;">‚öΩ</div>
            <h1 style="font-size:60px; color:gold; margin:0; line-height:0.9;">PITCH<br><span style="font-size:24px; color:white;">WALKER</span></h1>
            <div style="color:#888; font-size:14px; margin-top:15px;">v88.0 RESTORED</div>
            <button class="btn btn-green" style="margin-top:30px;" onclick="showLogin()">TAP TO START</button>
        </div>
        
        <div class="login-box" id="login-box">
            <h2 style="color:gold;">NEW SAVE FILE</h2>
            <input type="text" id="inp-name" class="input-field" placeholder="ENTER MANAGER NAME">
            <button class="btn btn-green" onclick="createAccount()">START CAREER</button>
            <button class="btn btn-red" onclick="backToTitle()">CANCEL</button>
        </div>
    </div>

    <div id="view-map" class="view-container">
        <div id="map-container"><div id="map"></div></div>
        <div class="map-overlay"></div>
        <button class="cabinet-btn" onclick="openBag()">üóÑÔ∏è</button>
        <button id="gps-btn" class="map-btn" onclick="recenterMap()">üéØ</button>
    </div>

    <div id="view-squad" class="view-container full-panel">
        <div style="padding:15px; text-align:center;">
            <h2>SQUAD (OVR: <span id="team-ovr">0</span>)</h2>
            <button class="btn btn-green" onclick="autoPick()">AUTO-PICK XI</button>
        </div>
        <div class="pitch-container" id="pitch"></div>
        <div style="padding:15px;">
            <button class="btn" onclick="playMatch()">‚öΩ PLAY MATCH</button>
            <h3 style="color:#aaa; border-bottom:1px solid #444; margin-top:20px;">ROSTER</h3>
            <div class="filter-bar">
                <button class="filter-btn active" onclick="setFilter('ALL', this)">ALL</button>
                <button class="filter-btn" onclick="setFilter('GK', this)">GK</button>
                <button class="filter-btn" onclick="setFilter('DEF', this)">DEF</button>
                <button class="filter-btn" onclick="setFilter('MID', this)">MID</button>
                <button class="filter-btn" onclick="setFilter('FWD', this)">FWD</button>
            </div>
            <div id="squad-list-container"></div>
        </div>
    </div>

    <div id="view-club" class="view-container full-panel">
        <div style="padding:20px; text-align:center;">
            <h1 id="club-name-display" style="color:var(--gold); margin:0;">MY CLUB</h1>
            <div style="display:flex; justify-content:center; gap:20px; margin-top:10px; font-size:24px;">
                <span>üí∞ <span id="coin-count">0</span></span>
                <span>üë• <span id="fan-count">0</span></span>
            </div>
        </div>
        
        <div id="stadium-render" style="height:150px; background:linear-gradient(#87CEEB,#4CAF50); border:4px solid #fff; margin:10px; display:flex; align-items:flex-end; justify-content:center;"></div>
        
        <div id="inv-item-tracker" class="item-counter-box"></div>

        <div style="padding:15px;">
            <button class="btn" onclick="toggleInventory()" id="inv-btn">SHOW DYES ‚ñº</button>
            <div id="club-inventory" style="display:none; background:#111; padding:10px; margin-top:10px; border:1px solid #444;">
                <h3>UNLOCKED DYES</h3><div id="dye-grid" style="display:grid; grid-template-columns:repeat(5,1fr); gap:5px;"></div>
            </div>
            
            <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:10px;">
                <div class="slot" style="background:#222; border:1px solid #555; padding:10px; text-align:center;">
                    <div style="font-size:40px;">‚ö°</div>
                    <div>AGENT</div><span style="color:gold">500 C</span>
                    <button class="btn btn-purple" style="padding:5px; margin-top:5px; font-size:18px;" onclick="buyItem('agent')">BUY</button>
                </div>
                <div class="slot" style="background:#222; border:1px solid #555; padding:10px; text-align:center;">
                    <div style="font-size:40px;">üîé</div>
                    <div>SCOUT</div><span style="color:gold">200 C</span>
                    <button class="btn" style="padding:5px; margin-top:5px; font-size:18px;" onclick="buyItem('scout')">BUY</button>
                </div>
            </div>
            
            <button class="btn btn-green" onclick="buildStadium()">üèóÔ∏è SET HOME HERE</button>
            <button class="btn" onclick="renameClub()">‚úèÔ∏è RENAME CLUB</button>
            <br><br>
            <button class="btn btn-purple" onclick="addHoloPack()">üéÅ DEV: FREE PACK</button>
        </div>
    </div>

    <div id="view-goals" class="view-container full-panel">
        <div style="padding:20px; text-align:center;">
            <h1 style="color:var(--green);">CAREER GOALS</h1>
            <div style="color:#aaa; font-size:18px;">COMPLETED: <span id="ach-count" style="color:white;">0/50</span></div>
        </div>
        <div id="ach-list" style="padding:10px;"></div>
    </div>

    <div id="view-mgr" class="view-container full-panel">
        <div style="padding:20px; text-align:center;">
            <h2>MANAGER PROFILE</h2>
            <div id="manager-preview" style="height:150px; width:150px; margin:0 auto; background:#333; border:4px solid white; display:flex; align-items:center; justify-content:center; overflow:hidden;"></div>
            <h1 id="mgr-name-display" style="color:white; margin:15px 0 5px 0; font-size:32px;">NAME</h1>
            <div style="color:#aaa; font-size:14px; margin-bottom:20px;">ID: <span id="mgr-id-display" style="color:gold">---</span></div>
            
            <button id="sound-btn" class="btn" style="margin-bottom:20px; background:#444;" onclick="toggleSound()">üîä SOUND: ON</button>

            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px; text-align:left;">
                <div class="stat-box"><span style="color:#aaa; font-size:14px;">üèÜ WINS</span><br><span id="stat-wins" style="color:gold; font-size:24px;">0</span></div>
                <div class="stat-box"><span style="color:#aaa; font-size:14px;">üìÑ SIGNED</span><br><span id="stat-contracts" style="color:gold; font-size:24px;">0</span></div>
                <div class="stat-box"><span style="color:#aaa; font-size:14px;">üë£ DISTANCE</span><br><span id="stat-dist" style="color:gold; font-size:24px;">0.0km</span></div>
                <div class="stat-box"><span style="color:#aaa; font-size:14px;">üë• FANS</span><br><span id="stat-fans" style="color:gold; font-size:24px;">0</span></div>
            </div>
            <h3 style="margin-top:30px; border-bottom:1px solid #444;">CUSTOMIZE</h3>
            <div class="customizer-row"><button class="arrow-btn" onclick="changeMgrLook('hair', -1)">‚óÑ</button><span>HAIR STYLE</span><button class="arrow-btn" onclick="changeMgrLook('hair', 1)">‚ñ∫</button></div>
            <div class="customizer-row"><button class="arrow-btn" onclick="changeMgrLook('hairCol', -1)">‚óÑ</button><span>HAIR COLOR</span><button class="arrow-btn" onclick="changeMgrLook('hairCol', 1)">‚ñ∫</button></div>
            <div class="customizer-row"><button class="arrow-btn" onclick="changeMgrLook('skin', -1)">‚óÑ</button><span>SKIN TONE</span><button class="arrow-btn" onclick="changeMgrLook('skin', 1)">‚ñ∫</button></div>
            <div class="customizer-row"><button class="arrow-btn" onclick="changeMgrLook('suit', -1)">‚óÑ</button><span>SUIT COLOR</span><button class="arrow-btn" onclick="changeMgrLook('suit', 1)">‚ñ∫</button></div>
        </div>
    </div>

    <div id="nav-bar">
        <div id="nav-map" class="nav-btn active" onclick="switchView('map')">MAP</div>
        <div id="nav-squad" class="nav-btn" onclick="switchView('squad')">SQUAD</div>
        <div id="nav-club" class="nav-btn" onclick="switchView('club')">CLUB</div>
        <div id="nav-goals" class="nav-btn" onclick="switchView('goals')">GOALS</div>
        <div id="nav-mgr" class="nav-btn" onclick="switchView('mgr')">BOSS</div>
    </div>

    <div class="active-contract-hud"><div class="active-row"></div></div>
    
    <div id="modal-overlay"><div class="modal-box" id="modal-content"></div></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="script.js"></script>
</body>
</html>
